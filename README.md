# 📖 Trading Bot v5.1 GUI 完整使用手冊

> 本文檔詳細說明 GUI 控制面板中每一個設定項目的功能、建議值與使用情境

---

## 目錄

1. [快速開始](#快速開始)
2. [GUI 操作介面說明](#gui-操作介面說明)
   - [控制面板](#-控制面板)
   - [狀態儀表板](#-狀態儀表板-hud)
   - [兩階段操作流程](#-兩階段操作流程詳解)
   - [全部平倉功能](#️-全部平倉功能)
   - [系統日誌面板](#-系統日誌面板)
   - [設定分頁總覽](#️-設定分頁總覽)
   - [GUI 視窗佈局](#️-gui-視窗佈局)
3. [API 連線](#1-api-連線)
4. [交易設定](#2-交易設定)
5. [風險管理](#3-風險管理)
6. [市場過濾](#4-市場過濾)
7. [量能分級](#5-量能分級)
8. [v5.1 進階](#6-v51-進階)
9. [常見問題](#常見問題)

---

## 快速開始

### 安裝依賴
```bash
pip install -r requirements.txt
```

### 啟動 GUI
```bash
python trading_bot_gui_v5.1.py
```

### 首次設定流程
1. 在「API 連線」分頁輸入 API 金鑰和密鑰
2. 確認開啟「測試網模式」
3. 在「交易設定」設定交易對和方向
4. 點擊「儲存設定」
5. 點擊「▶ 啟動系統」連線交易所
6. 確認帳戶資訊正確後，點擊「▶ 開始交易」啟動自動交易

---

## GUI 操作介面說明

### 🎛️ 控制面板

GUI 採用**兩階段操作流程**，讓您在正式交易前確認連線狀態：

```
┌─────────────────────────────────────────────────────────────────┐
│  波茶波茶 v5.1 專業版                                            │
│  智能演算法交易系統                                              │
│                                                                 │
│  [● 系統待命]  [▶ 啟動系統] [▶ 開始交易] [■ 停止系統] [⚠ 全部平倉] │
└─────────────────────────────────────────────────────────────────┘
```

#### 操作按鈕說明

| 按鈕 | 功能 | 狀態變化 |
|------|------|---------|
| **▶ 啟動系統** | 連線交易所，獲取帳戶資訊 | 待命 → 連線中 → 已連線 |
| **▶ 開始交易** | 啟動自動交易（需先連線） | 已連線 → 交易中 |
| **■ 停止系統** | 停止機器人，斷開連線 | 任何狀態 → 已停止 |
| **⚠ 全部平倉** | 緊急關閉所有持倉 | 發送平倉指令 |

#### 系統狀態指示燈

| 狀態 | 顏色 | 說明 |
|------|------|------|
| 系統待命 | ⚪ 灰色 | 尚未啟動 |
| 連線中 | 🟡 黃色 | 正在連接交易所 |
| 已連線 | 🔵 藍色 | 連線成功，可開始交易 |
| 交易中 | 🟢 綠色 | 自動交易運行中 |
| 已停止 | 🔴 紅色 | 系統已停止 |

---

### 📊 狀態儀表板 (HUD)

連線成功後，儀表板會即時顯示帳戶資訊：

```
┌──────────────┬──────────────┬──────────────┬──────────────┐
│   帳戶餘額   │   活躍持倉   │  24小時盈虧  │   信號產生   │
│  1234.56 USDT│    2 / 3     │  +56.78 USDT │      5       │
└──────────────┴──────────────┴──────────────┴──────────────┘
                              [儲存設定] [重新載入] [清除日誌]
```

| 指標 | 說明 |
|------|------|
| **帳戶餘額** | 當前可用 USDT 餘額 |
| **活躍持倉** | 目前持倉數 / 最大允許持倉數 |
| **24小時盈虧** | 近 24 小時的盈虧金額 |
| **信號產生** | 本次運行產生的交易信號數量 |

#### 快捷操作按鈕

| 按鈕 | 功能 |
|------|------|
| **儲存設定** | 將當前設定儲存至 `bot_config.json` |
| **重新載入** | 從檔案重新載入設定 |
| **清除日誌** | 清空系統日誌面板 |

---

### 🔄 兩階段操作流程詳解

#### 階段一：啟動系統（連線模式）

點擊「▶ 啟動系統」後：
1. 系統以 `--info-only` 模式啟動
2. 連接交易所 API
3. 獲取並顯示帳戶餘額
4. 列出現有持倉資訊
5. **不會執行任何交易**

```
[12:00:00] [資訊] 正在連線交易所...
[12:00:02] [成功] 帳戶餘額: 1234.56 USDT
[12:00:02] [資訊] 現有持倉: 2 個
[12:00:02] [資訊]   BTC/USDT: LONG 0.0100 | PnL: $12.34
[12:00:02] [資訊]   ETH/USDT: SHORT 0.5000 | PnL: -$5.67
```

> 💡 **好處**：先確認 API 連線正常、餘額正確，避免設定錯誤導致意外交易

#### 階段二：開始交易

確認連線資訊無誤後，點擊「▶ 開始交易」：
1. 系統開始掃描市場
2. 根據策略產生交易信號
3. 自動執行買賣操作

```
[12:00:05] [資訊] 發送開始交易指令...
[12:00:05] [成功] 交易已啟動！
[12:00:06] [資訊] 開始掃描市場...
[12:00:10] [信號] BTC/USDT 出現做多信號 (B級)
```

---

### ⚠️ 全部平倉功能

點擊「⚠ 全部平倉」按鈕可**緊急關閉所有持倉**：

1. 系統會彈出確認對話框
2. 確認後發送平倉指令至交易所
3. 所有持倉將以市價單平倉

```
⚠️ 確定要關閉所有倉位嗎？
此操作不可撤銷！
        [是]  [否]
```

| 使用情境 |
|---------|
| 市場突發重大事件 |
| 需要緊急離場 |
| 策略出現異常行為 |

> ⚠️ **注意**：平倉使用市價單，在流動性差的市場可能產生滑點

---

### 📋 系統日誌面板

右側日誌面板即時顯示系統運行訊息：

```
┌─────────────────────────────────────────────────┐
│ 📋 系統日誌                                      │
├─────────────────────────────────────────────────┤
│ [12:00:00] [資訊] 系統已初始化，準備就緒。        │
│ [12:00:05] [成功] 已從文件載入配置。              │
│ [12:00:10] [資訊] 正在連線交易所...               │
│ [12:00:12] [成功] 帳戶餘額: 1234.56 USDT         │
│ [12:00:15] [信號] BTC/USDT 出現做多信號          │
│ [12:00:16] [警告] 量能不足，信號降級為 C 級       │
└─────────────────────────────────────────────────┘
```

#### 日誌級別說明

| 級別 | 顯示 | 說明 |
|------|------|------|
| 資訊 | `[資訊]` | 一般系統訊息 |
| 成功 | `[成功]` | 操作成功完成 |
| 警告 | `[警告]` | 需要注意的情況 |
| 錯誤 | `[錯誤]` | 發生錯誤，需要處理 |

---

### 🗂️ 設定分頁總覽

GUI 左側提供 6 個設定分頁：

```
┌─────────────────────────────────────────────────────────────┐
│  [API 連線] [交易設定] [風險管理] [市場過濾] [量能分級] [v5.1 進階] │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  🔑 交易所 API 設定                                          │
│  ─────────────────────────────────────────                  │
│  API 金鑰      [________________________]                   │
│  API 密鑰      [••••••••••••••••••••••••]                   │
│  交易所        [binance           ▼]                        │
│  測試網模式    [================⚪]                          │
│                                                             │
│  📱 Telegram 通知設定                                        │
│  ─────────────────────────────────────────                  │
│  啟用 Telegram [  ⚪================]                        │
│  Bot Token    [________________________]                    │
│  Chat ID      [________________________]                    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

| 分頁 | 內容 | 詳細說明 |
|------|------|---------|
| API 連線 | 交易所 API、Telegram 設定 | [查看詳情](#1-api-連線) |
| 交易設定 | 交易模式、槓桿、交易對 | [查看詳情](#2-交易設定) |
| 風險管理 | 倉位大小、技術指標參數 | [查看詳情](#3-風險管理) |
| 市場過濾 | ADX、ATR、均線糾纏過濾 | [查看詳情](#4-市場過濾) |
| 量能分級 | 量能閾值、弱勢信號設定 | [查看詳情](#5-量能分級) |
| v5.1 進階 | MTF、動態閾值、分級入場 | [查看詳情](#6-v51-進階) |

---

### 🖥️ GUI 視窗佈局

```
┌──────────────────────────────────────────────────────────────────────┐
│  波茶波茶 v5.1 專業版                    [● 系統待命] [啟動] [交易] [停止] [平倉] │
│  智能演算法交易系統                                                    │
├──────────────────────────────────────────────────────────────────────┤
│ ┌────────────┬────────────┬────────────┬────────────┐                │
│ │  帳戶餘額  │  活躍持倉  │ 24小時盈虧 │  信號產生  │ [儲存] [載入] [清除] │
│ │ -- USDT   │   0 / 3    │  -- USDT   │     0      │                │
│ └────────────┴────────────┴────────────┴────────────┘                │
├──────────────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────┐  ┌─────────────────────────────────────┐ │
│ │ [API連線][交易][風險]...│  │ 📋 系統日誌                          │ │
│ │                         │  │                                     │ │
│ │  🔑 交易所 API 設定     │  │ [12:00:00] [資訊] 系統已初始化      │ │
│ │  ───────────────────    │  │ [12:00:05] [成功] 已載入配置        │ │
│ │  API 金鑰  [________]   │  │ [12:00:10] [資訊] 連線交易所...     │ │
│ │  API 密鑰  [••••••••]   │  │ [12:00:12] [成功] 餘額: 1234 USDT   │ │
│ │  交易所    [binance ▼]  │  │ [12:00:15] [信號] BTC/USDT 做多     │ │
│ │  測試網    [====⚪]     │  │                                     │ │
│ │                         │  │                                     │ │
│ │  📱 Telegram 設定       │  │                                     │ │
│ │  ───────────────────    │  │                                     │ │
│ │  啟用      [⚪====]     │  │                                     │ │
│ │  Token     [________]   │  │                                     │ │
│ │  Chat ID   [________]   │  │                                     │ │
│ └─────────────────────────┘  └─────────────────────────────────────┘ │
└──────────────────────────────────────────────────────────────────────┘
```

---

## 1. API 連線

### 🔑 交易所 API 設定

#### API 金鑰
| 項目 | 說明 |
|------|------|
| **功能** | 交易所的 API 識別碼 |
| **取得方式** | Binance 測試網：testnet.binancefuture.com<br>Binance 正式網：binance.com → API 管理 |
| **注意事項** | 複製時確保沒有多餘空格 |

#### API 密鑰
| 項目 | 說明 |
|------|------|
| **功能** | API 的私鑰，用於簽名請求 |
| **安全提醒** | 絕對不要分享給任何人 |
| **顯示方式** | GUI 中以 ••••• 遮蔽顯示 |

#### 交易所
| 項目 | 說明 |
|------|------|
| **功能** | 選擇要連接的交易所 |
| **支援選項** | binance、bybit、okx、bitget |
| **預設** | binance |

#### 測試網模式
| 項目 | 說明 |
|------|------|
| **功能** | 開啟時連接交易所測試網，使用虛擬資金 |
| **建議** | **強烈建議新手先開啟**，驗證策略後再關閉 |
| **開啟時** | 連接測試網（如 testnet.binancefuture.com） |
| **關閉時** | 連接正式交易所，使用真實資金 |

```
⚠️ 重要提醒：
測試網和正式網的 API Key 是不同的！
測試網 API 無法用於正式網，反之亦然。
```

---

### 📱 Telegram 通知

#### 啟用通知
| 項目 | 說明 |
|------|------|
| **功能** | 開啟後，交易信號和動作會推送到 Telegram |
| **使用情境** | 不方便看電腦時，手機即時收到通知 |

#### Bot Token
| 項目 | 說明 |
|------|------|
| **功能** | Telegram Bot 的識別令牌 |
| **取得方式** | 在 Telegram 搜尋 @BotFather → /newbot |
| **格式範例** | `123456789:ABCdefGHIjklMNOpqrsTUVwxyz` |

#### Chat ID
| 項目 | 說明 |
|------|------|
| **功能** | 接收通知的聊天室 ID |
| **取得方式** | 向 @userinfobot 發送任意訊息 |
| **格式範例** | `123456789` 或 `-100123456789`（群組） |

---

## 2. 交易設定

### 📊 交易模式設定

#### 交易模式（spot / future）

| 選項 | 說明 | 適用情境 |
|------|------|---------|
| **spot（現貨）** | 直接買賣加密貨幣 | 長期持有、不想承擔槓桿風險 |
| **future（合約）** | 使用保證金交易，可做多做空 | 短線交易、雙向操作、放大收益 |

```
📌 現貨 vs 合約差異：

現貨：
- 買入 = 擁有該幣種
- 只能做多（低買高賣）
- 無槓桿，風險較低
- 無法做空

合約：
- 買入 = 持有合約部位
- 可做多也可做空
- 可使用槓桿放大收益/風險
- 有強制平倉風險
```

#### 交易方向（long / short / both）

| 選項 | 說明 | 適用情境 |
|------|------|---------|
| **long（只做多）** | 只在看漲時進場 | 牛市、不熟悉做空 |
| **short（只做空）** | 只在看跌時進場 | 熊市、專門做空策略 |
| **both（雙向）** | 多空都做 | 震盪市、最大化機會 |

```
💡 建議：
- 新手：先用 long，熟悉後再開 both
- 牛市明確時：long
- 熊市明確時：short
- 震盪不明時：both
```

#### 槓桿倍數

| 項目 | 說明 |
|------|------|
| **範圍** | 1x ~ 20x |
| **作用** | 放大倉位價值，同時放大盈虧 |
| **計算** | 實際倉位 = 保證金 × 槓桿倍數 |

| 槓桿 | 風險等級 | 適用對象 |
|------|---------|---------|
| 1-3x | 🟢 低風險 | 新手、保守型 |
| 5-10x | 🟡 中風險 | 有經驗者 |
| 20x+ | 🔴 高風險 | 專業交易者 |

```
⚠️ 槓桿風險示例：

本金 $1000，開 10x 槓桿：
- 實際控制 $10,000 倉位
- 價格漲 10% → 賺 $1000（本金翻倍）
- 價格跌 10% → 虧 $1000（本金歸零）

建議新手從 1-3x 開始！
```

#### 硬止損

| 項目 | 說明 |
|------|------|
| **開啟時** | 在交易所設置實際的止損限價單 |
| **關閉時** | 僅由程式監控，手動平倉 |
| **建議** | **強烈建議開啟**，防止程式異常時無保護 |

---

### 💹 交易標的設定

#### 交易對設定

| 項目 | 說明 |
|------|------|
| **格式** | `基礎幣/計價幣`，用逗號分隔 |
| **範例** | `BTC/USDT, ETH/USDT, SOL/USDT` |
| **支援** | 所選交易所上架的交易對 |

```
💡 選幣建議：

主流幣（推薦新手）：
- BTC/USDT - 流動性最佳，波動相對穩定
- ETH/USDT - 第二大幣種，趨勢明顯

中型幣：
- SOL/USDT - 波動較大，機會多
- LINK/USDT - 趨勢性強
- ADA/USDT - 波動適中

避免：
- 小市值幣 - 流動性差，滑點大
- 新上架幣 - 歷史數據不足
```

---

### ⏱️ 時間設定

#### 檢查間隔（秒）

| 項目 | 說明 |
|------|------|
| **功能** | 機器人掃描市場的頻率 |
| **範圍** | 10 ~ 300 秒 |

| 設定值 | 使用情境 |
|-------|---------|
| 10-60 秒 | 測試階段，快速驗證 |
| 60-120 秒 | 日常運行，推薦 |
| 300 秒 | 低頻策略，減少 API 請求 |

---

## 3. 風險管理

### ⚖️ 倉位管理

#### 單筆風險

| 項目 | 說明 |
|------|------|
| **功能** | 每筆交易最大可承受的虧損佔總資金比例 |
| **範圍** | 1% ~ 10%（0.01 ~ 0.10） |
| **計算** | 止損觸發時虧損 = 總資金 × 單筆風險 |

| 設定值 | 風格 | 說明 |
|-------|------|------|
| 1% | 🟢 極保守 | 連虧 10 次只虧 10% |
| 2% | 🟢 保守 | **推薦新手使用** |
| 3% | 🟡 標準 | 專業交易者常用 |
| 5% | 🔴 激進 | 高風險高報酬 |

```
📐 倉位計算範例：

總資金：$10,000
單筆風險：2%（$200）
入場價：$50,000
止損價：$49,000（2% 止損距離）

最大倉位 = $200 ÷ ($50,000 - $49,000) × $50,000
         = $200 ÷ $1,000 × $50,000
         = 0.2 × $50,000
         = $10,000（即 0.2 BTC）

→ 若止損觸發，虧損剛好是 $200（2%）
```

#### 最大總風險

| 項目 | 說明 |
|------|------|
| **功能** | 所有持倉加總的最大風險比例 |
| **範圍** | 1% ~ 20%（0.01 ~ 0.20） |
| **計算** | 最大持倉數 = 總風險上限 ÷ 單筆風險 |

| 組合 | 最大持倉數 | 說明 |
|------|-----------|------|
| 6% ÷ 2% | 3 個 | **推薦配置** |
| 9% ÷ 3% | 3 個 | 標準配置 |
| 10% ÷ 2% | 5 個 | 分散配置 |

#### 最大持倉數

| 項目 | 說明 |
|------|------|
| **功能** | 硬性限制同時持有的倉位數量 |
| **範圍** | 1 ~ 10 個 |
| **建議** | 與「總風險上限 ÷ 單筆風險」一致 |

---

### 📈 技術指標參數

#### 回溯週期（Lookback Period）

| 項目 | 說明 |
|------|------|
| **功能** | 計算前高/前低的 K 線數量 |
| **用於** | 2B 突破信號檢測 |
| **範圍** | 5 ~ 50 根 K 線 |

| 設定值 | 效果 |
|-------|------|
| 5-15 | 靈敏，信號多但雜訊也多 |
| 20 | **平衡**，推薦使用 |
| 30-50 | 穩健，信號少但品質高 |

#### 成交量均線週期（Volume MA Period）

| 項目 | 說明 |
|------|------|
| **功能** | 計算平均成交量的週期 |
| **用於** | 判斷當前量能是否放大 |
| **範圍** | 5 ~ 50 根 K 線 |

#### ATR 週期

| 項目 | 說明 |
|------|------|
| **功能** | 計算平均真實波幅的週期 |
| **用於** | 止損距離計算、波動率過濾 |
| **範圍** | 5 ~ 30 根 K 線（預設 14） |

#### ATR 乘數

| 項目 | 說明 |
|------|------|
| **功能** | 止損距離 = ATR × 乘數 |
| **範圍** | 0.5 ~ 4.0 |

| 設定值 | 止損風格 |
|-------|---------|
| 0.5-1.0 | 緊止損，容易被掃 |
| 1.5 | **標準**，推薦 |
| 2.0-4.0 | 寬止損，給更多空間 |

---

## 4. 市場過濾

### 🎯 市場過濾條件

> 市場過濾器的目的是**避免在不利的市場環境中交易**

#### 啟用市場過濾

| 項目 | 說明 |
|------|------|
| **開啟時** | 檢查 ADX、ATR、EMA 後才允許交易 |
| **關閉時** | 跳過所有市場狀態檢查 |
| **建議** | **強烈建議開啟** |

---

#### ADX 閾值（趨勢強度）

| 項目 | 說明 |
|------|------|
| **指標說明** | ADX（Average Directional Index）衡量趨勢強度 |
| **範圍** | 0 ~ 100 |
| **過濾邏輯** | ADX < 閾值 → 拒絕交易 |

| ADX 值 | 市場狀態 | 交易建議 |
|--------|---------|---------|
| 0-15 | 無趨勢/盤整 | ❌ 不交易 |
| 15-25 | 弱趨勢 | ⚠️ 謹慎 |
| 25-50 | 強趨勢 | ✅ 適合交易 |
| 50+ | 極強趨勢 | ✅ 最佳環境 |

| 閾值設定 | 效果 |
|---------|------|
| 5-12 | 寬鬆，機會多但假信號也多 |
| 15-18 | **推薦**，平衡 |
| 25-40 | 嚴格，只在強趨勢交易 |

```
📊 ADX 解讀：

ADX 只衡量趨勢「強度」，不判斷方向。
- ADX 上升 = 趨勢正在增強（不管漲跌）
- ADX 下降 = 趨勢正在減弱
- ADX 低迷 = 市場盤整，不適合趨勢策略
```

---

#### ATR 突出乘數

| 項目 | 說明 |
|------|------|
| **功能** | 當前 ATR 超過均值的倍數上限 |
| **範圍** | 1.0 ~ 5.0 |
| **過濾邏輯** | 當前 ATR > 均值 × 倍數 → 拒絕交易 |

| 設定值 | 效果 |
|-------|------|
| 1.0-1.5x | 嚴格，波動稍大就停止 |
| 2.0x | **推薦**，過濾極端波動 |
| 3.0-5.0x | 寬鬆，只過濾最極端情況 |

```
💡 為什麼要過濾高波動？

高波動時期的風險：
1. 止損容易被掃
2. 滑點增加
3. 假突破頻繁
4. 情緒化行情難以預測

典型高波動時期：
- 重大新聞發布
- 市場恐慌/狂熱
- 大額清算連鎖反應
```

---

#### 均線糾纏閾值

| 項目 | 說明 |
|------|------|
| **功能** | EMA10 和 EMA20 的差距百分比下限 |
| **過濾邏輯** | 差距 < 閾值 → 視為盤整，拒絕交易 |
| **計算** | 差距 = |EMA10 - EMA20| ÷ EMA20 |

| 設定值 | 效果 |
|-------|------|
| 1% (0.01) | 嚴格，需要明確趨勢 |
| 2% (0.02) | **推薦**，適度過濾 |
| 5-10% (0.05-0.10) | 寬鬆，允許輕微糾纏 |

```
📈 均線糾纏示意：

糾纏狀態（不適合交易）：
EMA10: ════════════════
EMA20: ════════════════
       差距 < 1%，方向不明

分離狀態（適合交易）：
EMA10: ═══════════════════
EMA20: ══════════════
       差距 > 2%，趨勢明確
```

---

## 5. 量能分級

### 📊 量能分級系統

> 量能是價格變動的燃料，量能分級幫助判斷信號的可靠程度

#### 啟用量能分級

| 項目 | 說明 |
|------|------|
| **開啟時** | 根據量能強度給信號分級 |
| **關閉時** | 只檢查量能是否大於均量 |
| **建議** | **建議開啟**，更精細的信號管理 |

---

#### 量能等級說明

| 等級 | 圖示 | 閾值 | 含義 | 信號品質 |
|------|------|------|------|---------|
| 爆發級 | 🔥 | ≥ 2.5x | 機構大量進場 | ⭐⭐⭐⭐⭐ |
| 強勢級 | 💪 | ≥ 1.5x | 明確買/賣盤 | ⭐⭐⭐⭐ |
| 中等級 | ✅ | ≥ 1.0x | 正常確認 | ⭐⭐⭐ |
| 弱勢級 | ⚠️ | < 1.0x | 量能不足 | ⭐⭐ |

```
📊 量能倍數計算：

量能倍數 = 當前成交量 ÷ 20 日平均成交量

範例：
- 20 日均量：1000 BTC
- 當前成交量：2500 BTC
- 量能倍數：2.5x（爆發級）
```

---

#### 各閾值設定

##### 爆發量閾值
| 項目 | 說明 |
|------|------|
| **預設** | 2.5x |
| **範圍** | 1.5 ~ 5.0 |
| **含義** | 達到此倍數視為「爆發級」信號 |

##### 強勢量閾值
| 項目 | 說明 |
|------|------|
| **預設** | 1.5x |
| **範圍** | 1.0 ~ 3.0 |
| **含義** | 達到此倍數視為「強勢級」信號 |

##### 中等量閾值
| 項目 | 說明 |
|------|------|
| **預設** | 1.0x |
| **範圍** | 0.5 ~ 2.0 |
| **含義** | 達到此倍數視為「中等級」信號 |

##### 最低量閾值
| 項目 | 說明 |
|------|------|
| **預設** | 0.7x |
| **範圍** | 0.3 ~ 1.5 |
| **含義** | 低於此值的信號會被**直接拒絕** |

```
💡 閾值調整建議：

保守設定（減少假信號）：
- 爆發級：3.0x
- 強勢級：2.0x
- 中等級：1.5x
- 最低門檻：1.0x

積極設定（增加出手機會）：
- 爆發級：2.5x
- 強勢級：1.5x
- 中等級：1.0x
- 最低門檻：0.7x ← v5.1 預設
```

---

#### 接受弱勢信號

| 項目 | 說明 |
|------|------|
| **開啟時** | 允許量能介於「最低門檻」和「中等級」之間的信號 |
| **關閉時** | 只接受中等級以上的信號 |
| **影響** | 開啟會增加約 20-30% 的交易機會 |

```
📌 決策流程：

量能 < 最低門檻（0.7x）
  └→ ❌ 直接拒絕（不管此設定）

量能 介於 0.7x ~ 1.0x
  ├→ 接受弱勢信號 = ON → ✅ 接受（標記為弱勢）
  └→ 接受弱勢信號 = OFF → ❌ 拒絕

量能 ≥ 1.0x
  └→ ✅ 接受
```

---

## 6. v5.1 進階

### ⚡ v5.1 進階功能

v5.1 版本的核心理念：**勝率不掉，出手機會增加**

實現方式：
1. 放寬部分硬性條件
2. 改用「分級管理」取代「硬性過濾」
3. 新增互補策略捕捉不同類型機會

---

### ⚡ v5.1 進階功能開關

#### 多時間框架確認（MTF）

| 項目 | 說明 |
|------|------|
| **功能** | 使用 4 小時圖確認趨勢方向 |
| **檢查內容** | 4H EMA20 和 EMA50 的排列 |
| **特點** | **不作為硬性條件**，用於信號分級 |

```
📊 MTF 確認邏輯：

做多信號時檢查 4H 圖：
✅ 價格 > EMA20 > EMA50 → MTF 確認通過
⚠️ 其他情況 → MTF 未確認（信號降級，但不拒絕）

做空信號時檢查 4H 圖：
✅ 價格 < EMA20 < EMA50 → MTF 確認通過
⚠️ 其他情況 → MTF 未確認
```

| MTF 狀態 | 對信號的影響 |
|---------|-------------|
| 確認通過 | +2 分，有助於升級為 A 級 |
| 未確認 | 不加分，但信號仍可執行 |

---

#### 動態閾值調整

| 項目 | 說明 |
|------|------|
| **功能** | ADX 和 ATR 閾值根據近期市場狀態自動調整 |
| **目的** | 在不同市場環境都能找到合適的機會 |

##### ADX 動態調整

| 近 20 日 ADX 平均 | 使用的閾值 | 原因 |
|------------------|-----------|------|
| < 20（弱趨勢市場） | 15 | 降低門檻，不錯過難得的趨勢 |
| 20-30（正常市場） | 18 | 標準閾值 |
| > 30（強趨勢市場） | 25 | 提高要求，只做最強趨勢 |

##### ATR 動態調整

| 近期波動率 | ATR 乘數 | 止損效果 |
|-----------|---------|---------|
| 低波動（< 0.8x） | 1.2x | 較緊止損 |
| 正常（0.8-1.5x） | 1.5x | 標準止損 |
| 高波動（> 1.5x） | 2.0x | 較寬止損 |

---

#### 分級入場系統

| 項目 | 說明 |
|------|------|
| **功能** | 根據信號品質給予 A/B/C 等級，使用不同倉位 |
| **目的** | 好信號多投入，普通信號少投入，維持整體期望值 |

##### 評分機制

| 評分項目 | 分數 |
|---------|------|
| MTF 時間框架對齊 | +2 分 |
| 市場狀態強勢（ADX > 25） | +2 分 |
| 量能爆發/強勢 | +2 分 |
| 量能中等 | +1 分 |
| K 線形態確認 | +1 分 |

##### 等級劃分

| 總分 | 等級 | 圖示 | 倉位乘數 |
|------|------|------|---------|
| ≥ 6 分 | A 級 | 🏆 | 100%（預設 1.0） |
| 4-5 分 | B 級 | 🥈 | 70%（預設 0.7） |
| < 4 分 | C 級 | 🥉 | 50%（預設 0.5） |

```
💡 分級系統的價值：

傳統做法：
- 信號達標 → 固定倉位進場
- 信號未達標 → 不進場

分級做法：
- A 級信號 → 100% 倉位（最有信心）
- B 級信號 → 70% 倉位（有信心但謹慎）
- C 級信號 → 50% 倉位（機會但控制風險）

效果：
- 出手機會增加（C 級信號以前會被過濾）
- 勝率維持（低品質信號用小倉位）
- 整體期望值不變或提升
```

### 🎯 分層倉位設定

#### A 級倉位乘數
| 項目 | 說明 |
|------|------|
| **預設** | 1.0（100%） |
| **範圍** | 0.5 ~ 1.5 |
| **建議** | 保持 1.0，充分把握最佳機會 |

#### B 級倉位乘數
| 項目 | 說明 |
|------|------|
| **預設** | 0.7（70%） |
| **範圍** | 0.3 ~ 1.0 |
| **建議** | 0.6 ~ 0.8 之間 |

#### C 級倉位乘數
| 項目 | 說明 |
|------|------|
| **預設** | 0.5（50%） |
| **範圍** | 0.2 ~ 0.8 |
| **建議** | 新手可設 0.3，熟悉後調為 0.5 |

---

### 互補策略設定

#### EMA 回撤策略

| 項目 | 說明 |
|------|------|
| **功能** | 捕捉趨勢中的回撤機會 |
| **適用環境** | 明確趨勢中，價格回撤到均線附近 |
| **信號品質** | 固定為「中等級」 |

```
📈 EMA 回撤做多條件：

1. EMA20 > EMA50（多頭排列）
2. 價格回撤到 EMA20 附近（2% 範圍內）
3. 出現反彈（收陽線）
4. 量能 ≥ 0.6x 均量（要求較低）

   EMA50 ─────────────────────────
   
   EMA20 ═══════════════════╗
                            ║ 回撤
   價格  ──────────────────╝──── 反彈進場
```

| 與 2B 策略的差異 |
|----------------|
| 2B：抓反轉，需要突破後失敗 |
| EMA 回撤：抓順勢，需要回撤到支撐 |

---

#### 量能突破策略

| 項目 | 說明 |
|------|------|
| **功能** | 捕捉放量突破行情 |
| **適用環境** | 盤整後突然放量突破 |
| **信號品質** | 固定為「強勢級」 |

```
📊 量能突破做多條件：

1. 當前成交量 ≥ 2x 均量（明顯放量）
2. 收盤價突破近 10 根 K 線的高點
3. 收陽線

                         ╔═══ 放量突破！
                         ║
   ──────────────────────╝
        近期高點
   ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ 
   └─┘ └─┘ └─┘ └─┘ └─┘   盤整區間
```

---

#### 結構破壞出場

| 項目 | 說明 |
|------|------|
| **功能** | 當價格破壞近期結構時自動出場 |
| **做多時** | 跌破近期波段低點 → 全部平倉 |
| **做空時** | 漲破近期波段高點 → 全部平倉 |
| **建議** | 進階功能，**新手先關閉** |

```
⚠️ 結構破壞示意：

做多持倉中，價格走勢：
     高點
      /\
     /  \
    /    \  ← 持倉中
   /      \
  /        \______ 跌破此低點 = 結構破壞
 低點

觸發條件：跌破低點 × 0.995（0.5% 緩衝）
```

---

### 策略優先級

當同時出現多個信號時，按以下優先級選擇：

| 優先級 | 策略 | 原因 |
|-------|------|------|
| 1 | 量能突破 | 放量突破成功率最高 |
| 2 | 2B 突破 | 經典反轉形態 |
| 3 | EMA 回撤 | 順勢入場，風險較低 |

---

## 常見問題

### Q1：新手應該如何設定？

**推薦新手配置：**
```
【交易設定分頁】
交易模式：future
交易方向：long_only（先只做多）
槓桿倍數：1-3
硬止損：開啟

【風險管理分頁】
單筆風險：0.02（2%）
最大總風險：0.06（6%）
最大持倉數：3

【市場過濾分頁】
啟用市場過濾：開啟
ADX 閾值：18
ATR 突出乘數：2.0
均線糾纏閾值：0.02

【量能分級分頁】
啟用量能分級：開啟
最低量閾值：1.0
接受弱勢信號：關閉

【v5.1 進階分頁】
多時間框架確認：開啟
動態閾值調整：開啟
分級入場：開啟
C 級倉位乘數：0.3（保守）
EMA 回撤策略：關閉（先關）
量能突破策略：開啟
```

---

### Q2：如何增加交易機會？

**調整方向：**
1. 降低 ADX 閾值（18 → 15）
2. 降低最低量閾值（1.0 → 0.7）
3. 開啟「接受弱勢信號」
4. 開啟「EMA 回撤策略」
5. 增加監控的交易對數量

---

### Q3：如何提高勝率？

**調整方向：**
1. 提高 ADX 閾值（15 → 25）
2. 提高最低量閾值（0.7 → 1.0）
3. 關閉「接受弱勢信號」
4. 只做 A 級信號（C 級倉位乘數設為 0.2）
5. 只做多時間框架確認的信號

---

### Q4：API 錯誤怎麼辦？

**常見錯誤與解決：**

| 錯誤訊息 | 原因 | 解決方法 |
|---------|------|---------|
| Invalid API-Key ID | 密鑰錯誤 | 確認複製完整、無空格 |
| Signature not valid | Secret 錯誤 | 重新複製 Secret |
| Timestamp not valid | 時間不同步 | 檢查電腦時間 |
| IP not allowed | IP 白名單 | 在交易所添加 IP |

---

### Q5：測試網和正式網的差異？

| 項目 | 測試網 | 正式網 |
|------|-------|-------|
| 資金 | 虛擬資金 | 真實資金 |
| API | 測試網專用 | 正式網專用 |
| 風險 | 無 | 有 |
| 用途 | 策略驗證 | 實際交易 |

**建議流程：**
1. 測試網運行 1-2 週
2. 確認策略表現符合預期
3. 切換到正式網
4. 從小資金開始

---

## 附錄：參數速查表

### 風險管理參數

| 參數 | 保守 | 標準 | 激進 |
|------|------|------|------|
| 單筆風險 | 1% | 2% | 3-5% |
| 總風險上限 | 3% | 6% | 10%+ |
| 槓桿 | 1-2x | 3-5x | 10x+ |
| ATR 乘數 | 2.0 | 1.5 | 1.0 |

### 過濾參數

| 參數 | 寬鬆 | 標準 | 嚴格 |
|------|------|------|------|
| ADX 閾值 | 10 | 15-18 | 25+ |
| ATR 突出乘數 | 3.0x | 2.0x | 1.5x |
| 最低量閾值 | 0.5x | 0.7x | 1.0x+ |

### v5.1 分級倉位

| 等級 | 保守 | 標準 | 激進 |
|------|------|------|------|
| A 級 | 0.8 | 1.0 | 1.0 |
| B 級 | 0.5 | 0.7 | 0.8 |
| C 級 | 0.0 | 0.5 | 0.7 |

---

*文檔版本：v5.1.2*
*最後更新：2026-01-29*
*新增：GUI 操作介面完整說明、兩階段操作流程、全部平倉功能*
